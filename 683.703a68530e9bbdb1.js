"use strict";(self.webpackChunkformula_one=self.webpackChunkformula_one||[]).push([[683],{4624:(h,l,o)=>{o.d(l,{g:()=>i});var i=(()=>{return(r=i||(i={})).SEASON="season",r.ROUND="round",r.DRIVERS="drivers",i;var r})()},6997:(h,l,o)=>{o.d(l,{I:()=>u});var i=o(1223),r=o(520);let u=(()=>{class t{constructor(c){this.http=c}getRaceDrivers(c,p,f){return this.http.get(`https://ergast.com/api/f1/${c}/${p}/results.json`,{params:Object.assign({},f)})}}return t.\u0275fac=function(c){return new(c||t)(i.LFG(r.eN))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})()},268:(h,l,o)=>{o.d(l,{O:()=>t});var i=o(9808),r=o(6997),u=o(1223);let t=(()=>{class a{}return a.\u0275fac=function(p){return new(p||a)},a.\u0275mod=u.oAB({type:a}),a.\u0275inj=u.cJS({providers:[r.I],imports:[[i.ez],i.ez]}),a})()},4683:(h,l,o)=>{o.r(l),o.d(l,{MainModule:()=>b});var i=o(268),r=o(5767),u=o(4624),t=o(1223),a=o(520);let c=(()=>{class e{constructor(n){this.http=n}getSeasons(n){return this.http.get("https://ergast.com/api/f1/seasons.json",{params:Object.assign({},n)})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(a.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var p=o(9808);let f=(()=>{class e{constructor(n){this.element=n,this.isOpened=!1}toggleMenu(){this.isOpened?(this.element.nativeElement.nextSibling.style.display="none",this.isOpened=!1):(this.element.nativeElement.nextSibling.style.display="block",this.isOpened=!0)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq))},e.\u0275dir=t.lG2({type:e,selectors:[["","dropdown",""]],hostBindings:function(n,d){1&n&&t.NdJ("click",function(m){return d.toggleMenu(m.target)})}}),e})();function _(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){const m=t.CHM(n).$implicit;return t.oxw(2).selectYear(null==m?null:m.season)}),t._uU(1),t.qZA()}if(2&e){const n=s.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.season," ")}}function v(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"p",11),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).loadMoreYears()}),t._uU(1,"Load more"),t.qZA()}}function M(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",1)(1,"h1",2),t._uU(2,"Formula 1"),t.qZA(),t.TgZ(3,"div",3)(4,"button",4),t.NdJ("click",function(){return t.CHM(n),t.oxw().selectYear()}),t._uU(5," Current year "),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t._uU(8," Choose year "),t.qZA(),t.TgZ(9,"div",7)(10,"div"),t.YNc(11,_,2,1,"button",8),t.YNc(12,v,2,0,"p",9),t.qZA()()()()()}if(2&e){const n=t.oxw();t.xp6(11),t.Q6J("ngForOf",n.seasons),t.xp6(1),t.Q6J("ngIf",n.isLoadMoreAvailable)}}const O=[{path:"",component:(()=>{class e{constructor(n,d){this.route=n,this.seasonsApiService=d,this.filterOptions={limit:10,offset:0},this.isInMainPage=!0,this.isLoadMoreAvailable=!0}ngOnInit(){this.getYears()}ngOnDestroy(){this.subscription.unsubscribe()}getYears(){this.subscription=this.seasonsApiService.getSeasons(this.filterOptions).subscribe(n=>{this.seasons=n.MRData.SeasonTable.Seasons,this.filterOptions.limit!==this.seasons.length&&(this.isLoadMoreAvailable=!1)})}selectYear(n){this.isInMainPage=!1,this.route.navigate(n?[`/${u.g.SEASON}`,n]:[`/${u.g.SEASON}`,(new Date).getFullYear()])}loadMoreYears(){for(;this.filterOptions.limit===this.seasons.length;)this.filterOptions.limit+=10,this.getYears()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.F0),t.Y36(c))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-main"]],decls:2,vars:1,consts:[["class","main-block",4,"ngIf"],[1,"main-block"],[1,"main-block--header"],[1,"main-block--actions"],["type","button",1,"btn","btn-success","me-4",3,"click"],[1,"dropdown"],["type","button","dropdown","",1,"btn","btn-outline-success","dropdown-toggle"],[1,"dropdown-menu"],["type","button","class","btn btn-success",3,"click",4,"ngFor","ngForOf"],["class","load-more",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],[1,"load-more",3,"click"]],template:function(n,d){1&n&&(t.YNc(0,M,13,2,"div",0),t._UZ(1,"router-outlet")),2&n&&t.Q6J("ngIf",d.isInMainPage)},directives:[p.O5,f,p.sg,r.lC],encapsulation:2}),e})()},{path:`${u.g.SEASON}/:year`,loadChildren:()=>o.e(938).then(o.bind(o,938)).then(e=>e.SeasonModule)}];let S=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[r.Bz.forChild(O)],r.Bz]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[c],imports:[[i.O,S]]}),e})()}}]);